#!/usr/bin/env php
<?php

define('ROOT_PATH', realpath(__DIR__ . '/..') . '/');

require 'src/functions.php';

logText('Check article migration form Censhare with Prismic');

if ($argc < 3) {
    logText('2 parameters needed : php censhare-article-migration [prismic URL] [censhare URL]');
    exit;
}

list(, $prismicUrl, $censhareUrl) = $argv;

logText("Prismic URL is '$prismicUrl'");
logText("Censhare URL is '$censhareUrl'");

$prismicContent  = getHtmlContent($prismicUrl, 'Prismic');
$censhareContent = getHtmlContent($censhareUrl, 'Censhare');

logText("Parsing contents...");
// ...

$prismicDoc = new DOMDocument();
$prismicDoc->loadHTML($prismicContent, LIBXML_NOERROR);

$censhareDoc = new DOMDocument();
$censhareDoc->loadHTML($censhareContent, LIBXML_NOERROR);

checkAllMetaData($prismicDoc, $censhareDoc);
checkBreadcrumb($prismicDoc, $censhareDoc);
checkMainTags($prismicDoc, $censhareDoc);
checkHeader($prismicDoc, $censhareDoc);
checkContent($prismicDoc, $censhareDoc);
